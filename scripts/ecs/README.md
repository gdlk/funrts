# ECS Implementation - README

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

#### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ `Entity.gd` - –±–∞–∑–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å
- ‚úÖ `Component.gd` - –±–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ `System.gd` - –±–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ `ECSWorld.gd` - –º–µ–Ω–µ–¥–∂–µ—Ä ECS –º–∏—Ä–∞
- ‚úÖ `EntityNode.gd` - —Å–≤—è–∑—å Node ‚Üî ECS
- ‚úÖ –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ ECSWorld –≤ project.godot

#### –§–∞–∑–∞ 2: –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `TransformComponent.gd` - –ø–æ–∑–∏—Ü–∏—è, –ø–æ–≤–æ—Ä–æ—Ç, –º–∞—Å—à—Ç–∞–±
- ‚úÖ `HealthComponent.gd` - –∑–¥–æ—Ä–æ–≤—å–µ –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ‚úÖ `VelocityComponent.gd` - —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –¥–≤–∏–∂–µ–Ω–∏–µ
- ‚úÖ `NeedsComponent.gd` - –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ —é–Ω–∏—Ç–æ–≤
- ‚úÖ `SkillsComponent.gd` - –Ω–∞–≤—ã–∫–∏ —é–Ω–∏—Ç–æ–≤
- ‚úÖ `StatsComponent.gd` - —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- ‚úÖ `TaskComponent.gd` - —Ç–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞
- ‚úÖ `PathComponent.gd` - –ø—É—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
- ‚úÖ `BuildingComponent.gd` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–¥–∞–Ω–∏—è
- ‚úÖ `ProductionComponent.gd` - –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ `WorkersComponent.gd` - —Ä–∞–±–æ—á–∏–µ
- ‚úÖ `RaceComponent.gd` - —Ä–∞—Å–∞ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- ‚úÖ `LizardBioComponent.gd` - –±–∏–æ–º–µ—Ö–∞–Ω–∏–∫–∏ –Ø—â–µ—Ä–æ–≤
- ‚úÖ `CanidPackComponent.gd` - —Å—Ç–∞–π–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –ü–µ—Å–∏–≥–æ–ª–æ–≤—Ü–µ–≤
- ‚úÖ `RusMechanicalComponent.gd` - –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã –†—É—Å–æ–≤

#### –§–∞–∑–∞ 3: –ë–∞–∑–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ `ECSNeedsSystem.gd` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
- ‚úÖ `ECSMovementSystem.gd` - –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –ø—É—Ç–∏
- ‚úÖ `ECSProductionSystem.gd` - –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –≤ –∑–¥–∞–Ω–∏—è—Ö
- ‚úÖ `ECSAISystem.gd` - –±–∞–∑–æ–≤—ã–π AI

#### –§–∞–∑–∞ 4: –ì–∏–±—Ä–∏–¥–Ω—ã–µ Node –∫–ª–∞—Å—Å—ã
- ‚úÖ `UnitNode.gd` - –≥–∏–±—Ä–∏–¥–Ω—ã–π –∫–ª–∞—Å—Å —é–Ω–∏—Ç–∞
- ‚úÖ `BuildingNode.gd` - –≥–∏–±—Ä–∏–¥–Ω—ã–π –∫–ª–∞—Å—Å –∑–¥–∞–Ω–∏—è

### üöß –í –ø—Ä–æ—Ü–µ—Å—Å–µ

- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —é–Ω–∏—Ç–æ–≤
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–¥–∞–Ω–∏–π

### üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω—ã:**
   - `scenes/units/TestUnit.tscn` - —Ç–µ—Å—Ç–æ–≤—ã–π —é–Ω–∏—Ç
   - `scenes/buildings/TestBuilding.tscn` - —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–¥–∞–Ω–∏–µ
   - `scenes/test/ECSTestScene.tscn` - —Å—Ü–µ–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

2. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —é–Ω–∏—Ç—ã:**
   - –û–±–Ω–æ–≤–∏—Ç—å `BaseUnit.gd` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `UnitNode`
   - –û–±–Ω–æ–≤–∏—Ç—å `LizardUnit.gd`
   - –û–±–Ω–æ–≤–∏—Ç—å `CanidUnit.gd`
   - –û–±–Ω–æ–≤–∏—Ç—å `RusUnit.gd`

3. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–¥–∞–Ω–∏—è:**
   - –û–±–Ω–æ–≤–∏—Ç—å `BaseBuilding.gd` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `BuildingNode`
   - –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞—Å–æ–≤—ã–µ –∑–¥–∞–Ω–∏—è

4. **–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã:**
   - `LizardBioSystem.gd`
   - `CanidPackSystem.gd`
   - `RusMechanicalSystem.gd`

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ECS

### –°–æ–∑–¥–∞–Ω–∏–µ —é–Ω–∏—Ç–∞

```gdscript
# –í –∫–æ–¥–µ
var unit = UnitNode.new()
unit.global_position = Vector2(100, 100)
unit.unit_race = "lizard"
unit.unit_name = "–ì—Ä–æ–∫"
add_child(unit)

# Entity –∏ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ _ready()
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–¥–∞–Ω–∏—è

```gdscript
# –í –∫–æ–¥–µ
var building = BuildingNode.new()
building.global_position = Vector2(200, 200)
building.building_type = "workshop"
building.building_race = "rus"
add_child(building)
```

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

```gdscript
# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
var health = ecs_world.get_component(entity_id, "res://scripts/ecs/components/HealthComponent.gd")
if health:
    health.take_damage(10)

# –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
var buff = BuffComponent.new()
ecs_world.add_component(entity_id, buff)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ
if ecs_world.has_component(entity_id, "res://scripts/ecs/components/NeedsComponent.gd"):
    print("Unit has needs")
```

### –ü–æ–∏—Å–∫ —Å—É—â–Ω–æ—Å—Ç–µ–π

```gdscript
# –ù–∞–π—Ç–∏ –≤—Å–µ —é–Ω–∏—Ç—ã —Å –Ω–∏–∑–∫–∏–º –∑–¥–æ—Ä–æ–≤—å–µ–º
var entities = ecs_world.query([
    "res://scripts/ecs/components/HealthComponent.gd"
])

for entity_id in entities:
    var health = ecs_world.get_component(entity_id, "res://scripts/ecs/components/HealthComponent.gd")
    if health.is_critical():
        print("Entity %d needs healing!" % entity_id)
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ECS

```gdscript
# –í –∫–æ–Ω—Å–æ–ª–∏ –∏–ª–∏ –∫–æ–¥–µ
ecs_world.print_debug_info()
```

–í—ã–≤–æ–¥:
```
=== ECS World Debug Info ===
Entities: 10
Components: 80
Systems: 4
Component types: 8
  - TransformComponent: 10 instances
  - HealthComponent: 10 instances
  - NeedsComponent: 5 instances
  ...
===========================
```

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ü–µ–Ω–µ

- `F1` - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É ECS
- `F2` - –¢–µ—Å—Ç –¥–≤–∏–∂–µ–Ω–∏—è —é–Ω–∏—Ç–∞
- `F3` - –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∑–¥–∞–Ω–∏—è

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (–æ–∂–∏–¥–∞–µ–º—ã–µ)

- 50 —é–Ω–∏—Ç–æ–≤: 60 FPS
- 200 —é–Ω–∏—Ç–æ–≤: 60 FPS (—É–ª—É—á—à–µ–Ω–∏–µ —Å 45 FPS)
- 500 —é–Ω–∏—Ç–æ–≤: 45+ FPS (—É–ª—É—á—à–µ–Ω–∏–µ —Å 25 FPS)

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä Godot:
```
Debugger ‚Üí Profiler ‚Üí Process
```

–°–ª–µ–¥–∏—Ç–µ –∑–∞:
- `ECSWorld._process` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 5ms
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã - –∫–∞–∂–¥–∞—è < 2ms

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. ‚ö†Ô∏è –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
2. ‚ö†Ô∏è –°—Ç–∞—Ä—ã–µ —é–Ω–∏—Ç—ã –∏ –∑–¥–∞–Ω–∏—è –µ—â–µ –Ω–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
3. ‚ö†Ô∏è –†–∞—Å–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –µ—â–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `docs/ECS_ARCHITECTURE.md` - –ø–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `docs/ECS_MIGRATION_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
- `docs/ECS_IMPLEMENTATION_PLAN.md` - –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ü–µ–Ω–µ
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ecs_world.print_debug_info()` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏